# 9장 타입 변환과 단축 평가

## 9.1 타입 변환이란?

의도적으로 값의 타입을 변환하는 것을 **`명시적 타입 변환`** 또는 **`타입 캐스팅`** 이라 한다.

```jsx
var x = 10;
var str = x.toString(); // 명시적
```

개발자의 의도와는 상관없이 표현식을 평가하는 도중에 자바스크립트 엔진에 의해 `암묵적으로 타입이 자동 변환`되기도 한다. 이를 **`암묵적 타입 변환`** 또는 **`타입 강제 변환`** 이라 한다.

```jsx
var x = 10;
var str = x + ""; // 암묵적
```

개발자의 의도가 있었다면 명시적 타입 변환,
의도가 없었고 자바스크립트 엔진에 의해 변환되었다면 암묵적 타입 변환.

암묵적 타입 변환이나 명시적 타입 변환이나 무엇을 써도 상관은 없지만, 중요한 것은 코드를 예측할 수 있어야 한다는 것이다. 동료가 작성한 코드를 정확히 이해할 수 있어야 하고 자신이 작성한 코드도 동료가 쉽게 이해할 수 있어야 한다.
개인적인 생각으로는 코드의 예측이 잘 되려면 코드의 일관성이 중요할 것 같다.

## 9.2 암묵적 타입 변환

### 9.2.1 문자열 타입으로 변환

문자열 연결 연산자의 모든 피연산자는 코드의 문맥상 모두 문자열 타입이어야 한다.

```jsx
어떤 값 + '' => '어떤 값'
```

### 9.2.2 숫자 타입으로 변환

```jsx
// 산술 연산자 ( -, + , *, / )

+ '어떤 값' => 숫자 값
```

### 9.2.3 불리언 타입으로 변환

- truthy(참으로 평가되는 값) : falsy 값을 제외한 모든 값은 true로 평가된다.
- falsy(거짓으로 평가되는 값) 값으로 구분한다.
  - false
  - undefined
  - null
  - 0, -0
  - NaN
  - ''(빈 문자열)

## 9.3 명시적 타입 변환

### 9.3.1 문자열 타입으로 변환

- String 생성자 함수를 new 연산자 없이 호출하는 방법 : String(어떤 값)
- Object.prototype.toString 메서드를 사용하는 방법 : 어떤 값.toString()
- 문자열 연결 연산자를 이용하는 방법 : '어떤 값' + 1 → '어떤 값1’

### 9.3.2 숫자 타입으로 변환

- Number 생성자 함수를 new 연산자 없이 호출하는 방법 : Number(어떤 값) → 숫자 타입의 어떤 값
- parseInt, parseFloat 함수를 사용하는 방법 (문자열만 숫자 타입으로 변환 가능) → parseInt(어떤 값)
- 단항 산술 연산자를 이용하는 방법 : +'어떤 값' → 숫자 타입의 어떤 값
- 산술 연산자를 이용하는 방법

### 9.3.3 불리언 타입으로 변환

- Boolean 생성자 함수를 new 연산자 없이 호출하는 방법
- ! 부정 논리 연산자를 두 번 사용하는 방법

## 9.4 단축 평가

### 9.4.1 논리 연산자를 사용한 단축 평가

- 논리합 : ||
  - 두 개의 피연산자 중 하나만 true로 평가되어도 true를 반환한다.
  - **`좌항에서 우항으로 평가가 진행된다.`**
  - 논리 연산의 결과를 결정하는 **첫 번째 피연산자**를 그대로 반환한다.
- 논리곱 : &&
  - 두 개의 피연산자가 모두 true로 평가될 때 true를 반환.
  - **`좌항에서 우항으로 평가가 진행된다.`**
  - 첫 번째 피연산자가 참이라면 논리 연산의 결과를 결정하는 **두 번째 피연산자**를 그대로 반환한다.
- 단축 평가는 표현식을 평가하는 도중에 평가 결과가 확정된 경우 나머지 평가 과정을 생략하는 것을 말한다.
  - true || anything ⇒ true
  - false || anything ⇒ anything
  - true && anything ⇒ anything
  - false && anything ⇒ false
- 유용한 경우!
  - 객체를 가리키기를 기대하는 변수가 null 또는 undefined가 아닌지 확인하고 프로퍼티를 참조할 때
    ```jsx
    var elem = null;
    var value = elem && elem.value; // => null
    ```
  - 함수 매개변수에 기본값을 설정할 때
    ```jsx
    function getStringLength(str) {
      str = str || "";
      return str.length;
    }
    getStringLength(); // => 0
    getStringLength("hi"); // => 2
    ```

### 9.4.2 옵셔널 체이닝 연산자 → && 대체제

- ?. 연산자는 좌항의 피연산자가 null 또는 undefined인 경우 undefined를 반환하고, 그렇지 않으면 우항의 프로퍼티 참조를 이어간다.

  ```jsx
  var elem = "";

  var value = elem?.value;
  console.log(value); // undefined

  var elem = "0";
  var value = elem?.value;
  console.log(value);
  ```

- 장점 : && 연산자를 쓰지 않아도 된다. 좌항 피연산자가 Falsy값이면 Falsy 값으로 평가되는 값을 반환하기에 value에 의도하지 않은 falsy 값이 들어갈 수 있다.

  ```jsx
  var elem = null
  var value = elem && elem.value; // => null

  //
  - true || anything ⇒ true
  - false || anything ⇒ anything
  - true && anything ⇒ anything
  - false && anything ⇒ false
  ```

### 9.4.3 null 병합 연산자 → || 대체제

- ?? 연산자는 좌항의 피연산자가 null 또는 undefined인 경우 우항의 피연산자를 반환하고, 그렇지 않으면 좌항의 피연산자를 반환한다.
- 장점 : || 연산자를 쓰지 않아도 된다. 변수에 기본값을 설정할 때 유용하다.
